<!DOCTYPE html>

<!--- HEAD--->
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>Genesis &middot; Dashboard</title>

		<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
		<meta name="description" content="Elephant is an admin template that helps you build modern Admin Applications, professionally fast! Built on top of Bootstrap, it includes a large collection of HTML, CSS and JS components that are simple to use and easy to customize.">
		<meta property="og:url" content="http://demo.madebytilde.com/elephant">
		<meta property="og:type" content="website">
		<meta property="og:title" content="The fastest way to build Modern Admin APPS for any platform, browser, or device.">
		<meta property="og:description" content="Elephant is an admin template that helps you build modern Admin Applications, professionally fast! Built on top of Bootstrap, it includes a large collection of HTML, CSS and JS components that are simple to use and easy to customize.">
		<meta property="og:image" content="http://demo.madebytilde.com/elephant.jpg">
		<meta name="twitter:card" content="summary_large_image">
		<meta name="twitter:site" content="@madebytilde">
		<meta name="twitter:creator" content="@madebytilde">
		<meta name="twitter:title" content="The fastest way to build Modern Admin APPS for any platform, browser, or device.">
		<meta name="twitter:description" content="Elephant is an admin template that helps you build modern Admin Applications, professionally fast! Built on top of Bootstrap, it includes a large collection of HTML, CSS and JS components that are simple to use and easy to customize.">
		<meta name="twitter:image" content="http://demo.madebytilde.com/elephant.jpg">
		<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
		<!-- <link rel="icon" type="image/png" href="../static/img/favicon-32x32.png" sizes="32x32">
		<link rel="icon" type="image/png" href="../static/img/favicon-16x16.png" sizes="16x16">
		<link rel="manifest" href="../manifest.json"> -->
		<link rel="mask-icon" href="safari-pinned-tab.svg" color="#0288d1">
		<meta name="theme-color" content="#ffffff">
		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400italic,500,700">
		<link rel="stylesheet" href="../static/css/vendor.min.css">
		<link rel="stylesheet" href="../static/css/elephant.min.css">
		<link rel="stylesheet" href="../static/css/application.min.css">
		<link rel="stylesheet" href="../static/css/demo.min.css">

		<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
	</head>


<!--- BODY--->
	<body class="layout layout-header-fixed">
	 
	<!--- HEADER - NAVBAR --->
		<div class="layout-header">
			<div class="navbar navbar-default">
				<div class="navbar-header">
					<a class="navbar-brand navbar-brand-center" href="{{url_for('home')}}">
						<img class="navbar-brand-logo" src="../static/img/logo-inverse.svg" alt="Elephant">
					</a>
					<button class="navbar-toggler visible-xs-block collapsed" type="button" data-toggle="collapse" data-target="#sidenav">
						<span class="sr-only">Toggle navigation</span>
						<span class="bars">
							<span class="bar-line bar-line-1 out"></span>
							<span class="bar-line bar-line-2 out"></span>
							<span class="bar-line bar-line-3 out"></span>
						</span>
						<span class="bars bars-x">
							<span class="bar-line bar-line-4"></span>
							<span class="bar-line bar-line-5"></span>
						</span>
					</button>
					<button class="navbar-toggler visible-xs-block collapsed" type="button" data-toggle="collapse" data-target="#navbar">
						<span class="sr-only">Toggle navigation</span>
						<span class="arrow-up"></span>
						<span class="ellipsis ellipsis-vertical">
							<img class="ellipsis-object" width="32" height="32" src="../static/img/0180441436.jpg" alt="Teddy Wilson">
						</span>
					</button>
				</div>
				<div class="navbar-toggleable">
					<nav id="navbar" class="navbar-collapse collapse">
						<button class="sidenav-toggler hidden-xs" title="Collapse sidenav ( [ )" aria-expanded="true" type="button">
							<span class="sr-only">Toggle navigation</span>
							<span class="bars">
								<span class="bar-line bar-line-1 out"></span>
								<span class="bar-line bar-line-2 out"></span>
								<span class="bar-line bar-line-3 out"></span>
								<span class="bar-line bar-line-4 in"></span>
								<span class="bar-line bar-line-5 in"></span>
								<span class="bar-line bar-line-6 in"></span>
							</span>
						</button>
						<ul class="nav navbar-nav navbar-right">
							
							<li class="dropdown hidden-xs">
								<button class="navbar-account-btn" data-toggle="dropdown" aria-haspopup="true">
									<img class="rounded" width="36" height="36" src="../static/img/user.jpg" alt="Teddy Wilson"> {{email}}
									<span class="caret"></span>
								</button>
								<ul class="dropdown-menu dropdown-menu-right">
									<li>
										<a href="upgrade.html">
											<h5 class="navbar-upgrade-heading">Dashboard Info</h5>
										</a>
									</li>
									<li class="divider"></li>
									<li><a href="contacts.html">Contacts</a></li>
									<li><a href="profile.html">Profile</a></li>
									<li><a href="{{url_for('logout')}}">Sign out</a></li>
								</ul>
							</li>
						</ul>
					</nav>
				</div>
			</div>
		</div>

	<!--- MAIN --->
		<div class="layout-main">

		<!--- SIDEBAR --->
			<div class="layout-sidebar">
				<div class="layout-sidebar-backdrop"></div>
				<div class="layout-sidebar-body">
					<div class="custom-scrollbar">
						<nav id="sidenav" class="sidenav-collapse collapse">
							<ul class="sidenav">
								<li class="sidenav-search hidden-md hidden-lg">
									<form class="sidenav-form" action="/">
										<div class="form-group form-group-sm">
											<div class="input-with-icon">
												<input class="form-control" type="text" placeholder="Searchâ€¦">
												<span class="icon icon-search input-icon"></span>
											</div>
										</div>
									</form>
								</li>

								<li class="sidenav-item">
								                  <a href="{{url_for('manager_profile')}}">
								                    <span class="sidenav-icon icon icon-home"></span>
								                    <span class="sidenav-label">Home</span>
								                  </a>
								                </li>

								                <li class="sidenav-item has-subnav">
								                  <a href="#" aria-haspopup="true">
								                    <span class="sidenav-icon icon icon-user"></span>
								                    <span class="sidenav-label">Clients</span>
								                  </a>
								                  <ul class="sidenav-subnav collapse">
								                    <li class="sidenav-subheading">Clients</li>
								                    <li><a href="{{'clients'}}">Show All Clients</a></li>
								                    <li><a href="{{'add_client'}}">Add Client</a></li>
								                  </ul>
								                </li>

								                <!-- <li class="sidenav-item has-subnav">
								                  <a href="#" aria-haspopup="true">
								                    <span class="sidenav-icon icon icon-cutlery"></span>
								                    <span class="sidenav-label">Food</span>
								                  </a>
								                  <ul class="sidenav-subnav collapse">
								                    <li class="sidenav-subheading">Food</li>
								                    <li><a href="{{'food'}}">Show All Food</a></li>
								                    <li><a href="{{'add_food'}}">Add Food</a></li>
								                  </ul>
								                </li> -->

								                <li class="sidenav-item has-subnav">
								                  <a href="#" aria-haspopup="true">
								                    <span class="sidenav-icon icon icon-certificate"></span>
								                    <span class="sidenav-label">Meal Options</span>
								                  </a>
								                  <ul class="sidenav-subnav collapse">
								                    <li class="sidenav-subheading">Meals Options</li>
								                    <li><a href="{{'meals'}}">Show All Meal Options</a></li>
								                    <li><a href="{{'add_meal'}}">Add Meal Option</a></li>
								                  </ul>
								                </li>

								                <!-- <li class="sidenav-item has-subnav">
								                  <a href="#" aria-haspopup="true">
								                    <span class="sidenav-icon icon icon-certificate"></span>
								                    <span class="sidenav-label">Daily Meal</span>
								                  </a>
								                  <ul class="sidenav-subnav collapse">
								                    <li class="sidenav-subheading">Meals</li>
								                    <li><a href="{{'daily_meals'}}">Show All Daily Meals</a></li>
								                    <li><a href="{{'add_daily_meal'}}">Add Daily Meal</a></li>
								                  </ul>
								                </li> -->

								                <!-- <li class="sidenav-item has-subnav">
								                  <a href="#" aria-haspopup="true">
								                    <span class="sidenav-icon icon icon-heart"></span>
								                    <span class="sidenav-label">Trainings</span>
								                  </a>
								                  <ul class="sidenav-subnav collapse">
								                    <li class="sidenav-subheading">Trainings</li>
								                    <li><a href="{{'trainings'}}">Show All Trainings</a></li>
								                    <li><a href="{{'add_training'}}">Add Training</a></li>
								                  </ul>
								                </li> -->

								                <li class="sidenav-item">
								                  <a href="{{'trainings'}}">
								                    <span class="sidenav-icon icon icon-certificate"></span>
								                    <span class="sidenav-label">Show Trainings</span>
								                  </a>
								                </li>

								                <!-- <li class="sidenav-item has-subnav">
								                  <a href="#" aria-haspopup="true">
								                    <span class="sidenav-icon icon icon-heart"></span>
								                    <span class="sidenav-label">Daily Meals</span>
								                  </a>
								                  <ul class="sidenav-subnav collapse">
								                    <li class="sidenav-subheading">Daily Meals</li>
								                    <li><a href="{{'daily_meals'}}">Show All Daily Meals</a></li>
								                    <li><a href="{{'add_training'}}">Add Training</a></li>
								                  </ul>
								                </li> -->

								                <li class="sidenav-item">
								                  <a href="{{'daily_meals'}}">
								                    <span class="sidenav-icon icon icon-certificate"></span>
								                    <span class="sidenav-label">Show Daily Meals</span>
								                  </a>
								                </li>
								                
								                <!-- <li class="sidenav-item has-subnav">
								                  <a href="#" aria-haspopup="true">
								                    <span class="sidenav-icon icon icon-certificate"></span>
								                    <span class="sidenav-label">Daily Routines</span>
								                  </a>
								                  <ul class="sidenav-subnav collapse">
								                    <li class="sidenav-subheading">Meals</li>
								                    <li><a href="{{'daily_routines'}}">Show All Daily Routines</a></li>
								                    <li><a href="{{'add_daily_routine'}}">Add Daily Routine</a></li>
								                  </ul>
								                </li> -->

								                <li class="sidenav-item">
								                  <a href="{{'add_daily_routine'}}">
								                    <span class="sidenav-icon icon icon-certificate"></span>
								                    <span class="sidenav-label">Add Daily Routine</span>
								                  </a>
								                </li>

								                <li class="sidenav-item has-subnav">
								                  <a href="#" aria-haspopup="true">
								                    <span class="sidenav-icon icon icon-heart"></span>
								                    <span class="sidenav-label">Recepts</span>
								                  </a>
								                  <ul class="sidenav-subnav collapse">
								                    <li class="sidenav-subheading">Recepts</li>
								                    <li><a href="{{'recepts'}}">Show All Recepts</a></li>
								                    <li><a href="{{'add_recept'}}">Add Recept</a></li>
								                  </ul>
								                </li>

							</ul>
						</nav>
					</div>
				</div>
			</div>

		<!--- MAIN DASHBOARD --->
			<div class="layout-content">
				<div class="layout-content-body">
					<div class="title-bar">
						<h1 class="title-bar-title">
							<span class="d-ib">Add Daily routine</span>
						</h1>
					</div>
				</div>

					<form data-toggle="md-validator">
						
							<div class="container">
								<div class="demo-md-form-wrapper">

									<div class="md-form-group">
                    <select class="md-form-control client" name="client" id="client" placeholder="Client">
                      <option value="" disabled="disabled" selected="selected">Client</option>
                      {% for client in data %}
                        <option value="{{client['client_id']}}">{{client['name']}}</option>
                      {% endfor %}
                    </select>
                    <label class="md-control-label"></label>
                  </div>


<div id="mealsAndTrainingContainer" style="display: none;">
								<div id="mealDiv"> 								
                  <div class="md-form-group">
                  	<div class="row">
                  		<div class="col-sm-2">
                  			<div class="md-form-group">
                    			<input class="md-form-control mealName" type="text" name="mealName"  placeholder="Meal Name">
                  			</div>
                  		</div>
                  		<div class="col-sm-2">
                  			<div class="md-form-group">
                  			  <select class="md-form-control mealCategory" name="category" data-msg="Meal Category">
                  			    <option value="" disabled="disabled" selected="selected">Meal Category</option>
                  			    <option value="Obrok 1">Obrok 1</option>
                  			    <option value="Obrok 2">Obrok 2</option>
                  			    <option value="Obrok 3">Obrok 3</option>
                  			    <option value="Obrok 4">Obrok 4</option>
                  			    <option value="Obrok 5">Obrok 5</option>
                  			    <option value="Obrok 6">Obrok 6</option>
                  			    <option value="Dodatok">Dodatok</option>
                  			  </select>
                  			</div>
                  		</div>
                  		<div class="col-sm-1">
                  			<div class="md-form-group">
                  			  <select class="md-form-control mealOptionOne" name="mealOptionOne" placeholder="Option 1">
                  			    <option value="" disabled="disabled" selected="selected">Option 1</option>
                  			    {% for option in data2 %}
                  			      <option value="{{option['option_id']}}">{{option['name']}}</option>
                  			    {% endfor %}
                  			  </select>
                  			</div>
                  		</div>
                  		<div class="col-sm-1">
                  			<div class="md-form-group">
                  			  <select class="md-form-control mealOptionTwo" name="mealOptionTwo" placeholder="Option 2">
                  			    <option value="" disabled="disabled" selected="selected">Option 2</option>
                  			    {% for option in data2 %}
                  			      <option value="{{option['option_id']}}">{{option['name']}}</option>
                  			    {% endfor %}
                  			  </select>
                  			</div>
                  		</div>
                  		<div class="col-sm-1">
                  			<div class="md-form-group">
                  			  <select class="md-form-control mealOptionThree" name="mealOptionThree" placeholder="Option 3">
                  			    <option value="" disabled="disabled" selected="selected">Option 3</option>
                  			    {% for option in data2 %}
                  			      <option value="{{option['option_id']}}">{{option['name']}}</option>
                  			    {% endfor %}
                  			  </select>
                  			</div>
                  		</div>
                  		<div class="col-sm-2">
                  			<div class="md-form-group">
                  			  <input class="md-form-control mealVreme" type="text" name="vreme"  placeholder="Vreme">
                  			</div>
                  		</div>
                  		<div class="col-sm-2">
                  			<div class="md-form-group">
                  			  <button type="button" onclick="removeThis(this)">Remove</button>
                  			</div>
                  		</div>
                  	</div>
                  </div>
								</div>
								<div id="trainingDiv"> 								
								  <div class="md-form-group">
								  	<div class="row">
								  		<div class="col-sm-2">
								  			<div class="md-form-group">
								    			<input class="md-form-control trainingName" type="text" name="trainingName"  placeholder="Training Name">
								  			</div>
								  		</div>
								  		<div class="col-sm-1">
								  			<div class="md-form-group">
								  			  <input class="md-form-control trainingSerii" type="text" name="trainingSerii"  placeholder="Serii">
								  			</div>
								  		</div>
								  		<div class="col-sm-2">
								  			<div class="md-form-group">
								  			  <input class="md-form-control trainingVezbaLink" type="text" name="trainingVezbaLink"  placeholder="Link Vezba">
								  			</div>
								  		</div>
								  		<div class="col-sm-1">
								  			<div class="md-form-group">
								  			  <input class="md-form-control trainingTech" type="text" name="trainingTech"  placeholder="Technika">
								  			</div>
								  		</div>
								  		<div class="col-sm-2">
								  			<div class="md-form-group">
								  			  <input class="md-form-control trainingTechLink" type="text" name="trainingTechLink"  placeholder="Link Tehnika">
								  			</div>
								  		</div>
								  		<div class="col-sm-1">
								  			<div class="md-form-group">
								  			  <input class="md-form-control trainingVreme" type="text" name="trainingVreme"  placeholder="Vreme">
								  			</div>
								  		</div>
								  		<div class="col-sm-1">
								  			<div class="md-form-group">
								  			  <input class="md-form-control trainingDescription" type="text" name="trainingDescription"  placeholder="Description">
								  			</div>
								  		</div>
								  		<div class="col-sm-1">
                  			<div class="md-form-group">
                  			  <button type="button" onclick="removeThis(this)" >Remove</button>
                  			</div>
                  		</div>
								  	</div>
								  </div>
								</div>
</div>

<div id="addedMealsAndTrainings">
	
</div>
								
                 				<div class="row" id="firstDate">
                 				  <div class="col-sm-12">
                 				    <div class="md-form-group md-label-floating">
                 				      <input class="md-form-contro mealsAndTrainingsDate" type="date" data-format="dd/MM/yyyy" data-msg-required="Please enter date" required>
                 				      <button type="button" onClick="removeCurrDate(this)">Remove Date</button>
                 				    </div>
                 				  </div>
                 				</div>

                 				<div id="datesWrapper">
                 					
                 				</div>
                 				<button type="button" onClick="addNewDate()">Add Date</button>


									<button type="button" id="addMeal">Add Meal</button>
									<button type="button" id="addTraining">Add Training</button>
									
									<button type="button" id="submitBtn">Submit</button>
								</div>
							</div>
						
					</form>
				</div>
			</div>

	<!--- SCRIPTS ---> 
		<script src="../static/js/vendor.min.js"></script>
		<script src="../static/js/elephant.min.js"></script>
		<script src="../static/js/application.min.js"></script>
		<script src="../static/js/demo.min.js"></script>

		<script>
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
			ga('create', 'UA-83990101-1', 'auto');
			ga('send', 'pageview');
		</script>

		<script>
			$('.multi-field-wrapper').each(function() {
				var $wrapper = $('.multi-fields', this);
				$(".add-field", $(this)).click(function(e) {
						$('.multi-field:first-child', $wrapper).clone(true).appendTo($wrapper).find('input').val('').focus();
				});
				$('.multi-field .remove-field', $wrapper).click(function() {
						if ($('.multi-field', $wrapper).length > 1)
								$(this).parent('.multi-field').remove();
				});
			});
		</script>

		<script type="text/javascript">
		 

		var addMeal = document.getElementById("addMeal")
		var addTraining = document.getElementById("addTraining")
		var client =  document.getElementById("client")
		
		var mealDiv = document.getElementById("mealDiv")
		var mealsAndTrainingContainer = document.getElementById("mealsAndTrainingContainer")
		var addedMealsAndTrainings = document.getElementById("addedMealsAndTrainings")
		var submitBtn = document.getElementById("submitBtn")

		var firstDate = document.getElementById("firstDate")
		var datesWrapper = document.getElementById("datesWrapper")

		console.log(firstDate)

		var allSelectedMeals = []


		function addNewDate(){
			var clnfirstDate = firstDate.cloneNode(true);
			datesWrapper.appendChild(clnfirstDate)
		}

		function removeCurrDate(t){
			t.parentNode.parentNode.parentNode.remove()
		}

		submitBtn.addEventListener("click", function(){
			console.log("rabotit")
			var allSelectedMeals = createArrayOfAllMeals();
			var allSelectedTrainings = createArrayOfAllTrainings();
			var allMealsAndTrainings = [allSelectedMeals, allSelectedTrainings]
			console.log(allSelectedMeals)
			console.log(allSelectedTrainings)

			fetch("/add_daily_routine", {
        		method: "POST",
        		headers: {
            	"Content-Type": "application/json"
        		},
        			body: JSON.stringify(allMealsAndTrainings)
      			}).then(res => {
  			      console.log(res);
  			    });
  		});
			
//         	var bodyFormData = new FormData()
// //      	  console.log(nameid.value)
//         	bodyFormData.append("allSelectedMeals", allSelectedMeals)
//         	bodyFormData.append("allSelectedTrainings", allSelectedTrainings)
        	
	
// 			axios({
//          		method: 'POST',
//          		url: '/add_daily_routine',
//          		data: bodyFormData,
//          		headers: {"Content-Type": "multipart/form-data"},
//        		 })
//             .then(function (response) {
//             	console.log(response)
//                 // if(response.status == 200){
//                 //   location.reload();
//                 //   $('html,body').scrollTop(0);
//                 // }
                
//             })
//             .catch(function (error) {
//                 console.log(error);
//             });
			
			
		

		function createArrayOfAllMeals(){
			var mealName = document.querySelectorAll(".mealName");
			var mealCategory = document.querySelectorAll(".mealCategory");
			var mealOptionOne = document.querySelectorAll(".mealOptionOne");
			var mealOptionTwo = document.querySelectorAll(".mealOptionTwo");
			var mealOptionThree = document.querySelectorAll(".mealOptionThree");
			var mealVreme = document.querySelectorAll(".mealVreme");
			var mealsAndTrainingsDate = document.querySelectorAll(".mealsAndTrainingsDate");

			var allDates=[]
			var allSelectedMeals = []
			
			for (var j = 0; j < mealsAndTrainingsDate.length; j++) {
				allDates.push(mealsAndTrainingsDate[j].value)
				
			}

			for (var i = 1; i < mealName.length; i++) {
				for (var x = 0; x < allDates.length; x++) {
					var newMeal = {
					clients_client_id  : client.value,
					name : mealName[i].value,
					category  : mealCategory[i].value,
					vreme : mealVreme[i].value,
					option1 : mealOptionOne[i].value,
					option2 : mealOptionTwo[i].value,
					option3 : mealOptionThree[i].value,
					date : allDates[x]
					}
					allSelectedMeals.push(newMeal)
				}
			}
			return allSelectedMeals;

		}


		function createArrayOfAllTrainings(){
			var trainingName = document.querySelectorAll(".trainingName");
			var trainingSerii = document.querySelectorAll(".trainingSerii");
			var trainingVezbaLink = document.querySelectorAll(".trainingVezbaLink");
			var trainingTech = document.querySelectorAll(".trainingTech");
			var trainingTechLink = document.querySelectorAll(".trainingTechLink");
			var trainingVreme = document.querySelectorAll(".trainingVreme");
			var trainingDescription = document.querySelectorAll(".trainingDescription");
			var mealsAndTrainingsDate = document.querySelectorAll(".mealsAndTrainingsDate");

			var allDates=[]
			var allSelectedTrainings = []
			
			for (var j = 0; j < mealsAndTrainingsDate.length; j++) {
				allDates.push(mealsAndTrainingsDate[j].value)
				
			}

			for (var i = 1; i < trainingName.length; i++) {
				for (var x = 0; x < allDates.length; x++) {
					var newTraining = {
					clients_client_id  : client.value,
					name : trainingName[i].value,
					serii_povt : trainingSerii[i].value,
					link_vezba : trainingVezbaLink[i].value,
					tech : trainingTech[i].value,
					link_tech : trainingTechLink[i].value,
					vreme : trainingVreme[i].value,
					date : allDates[x],
					description : trainingDescription[i].value
					}
					allSelectedTrainings.push(newTraining)
				}
			}
			return allSelectedTrainings;

		}

		function removeThis(t){
			t.parentNode.parentNode.parentNode.parentNode.parentNode.remove()
		}


		addMeal.addEventListener("click", function(){
			
			var newMealDiv = mealsAndTrainingContainer.childNodes;
			var clnMealDiv = newMealDiv[1].cloneNode(true);
			addedMealsAndTrainings.appendChild(clnMealDiv)
			console.log(clnMealDiv)
		})

		addTraining.addEventListener("click", function(){
			console.log(addTraining)
			var newTrainingDiv = mealsAndTrainingContainer.childNodes;
			console.log(newTrainingDiv)
			var clnTrainingDiv = newTrainingDiv[3].cloneNode(true);
			addedMealsAndTrainings.appendChild(clnTrainingDiv)

		})
		

		</script>
	</body>
</html>